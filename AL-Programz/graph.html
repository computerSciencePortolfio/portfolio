<html lang="en">
<head>
    <link rel="stylesheet" href="styles.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GC | Free Graph Creator</title>
</head>
<body>
    <div id="creator">
    <h1>Chart Creator</h1>
    <hr>
    <h3>Chart Type:</h3>
    <select id="type">
        <option>bar</option>
        <option>line</option>
    </select>
    <h3>Title</h3>
    <input type="text" id="title">
    <h3>Labels:</h3>
    <p>(What goes on the bottom of the graph | the name of your data | max 10 labels)</p>
    <div class="label-container" id="labels">
    <div>Label 1: <input class="label" value="label 1" type="text"></div>
    <div>Label 2: <input class="label" value="label 2" type="text"></div>
    </div>
    <button id="addBtn">+ Add Label</button>
    <h3>Data:</h3>
    <p>(What goes on the left of the graph | must be numeric | is the data for your labels)</p>
    <div class="label-container" id="data-sets">
    <div>Label 1 data:<input value="0" class="data" type="number"></div>
    <div>Label 2 data:<input value="0" class="data" type="number"></div>
    </div>
    <h3>Tension</h3>
    <p>(Change how tensed the lines for the line graph is [0-1 USE DECIMALS!])</p>
    <input id="tension" value="0" type="number">
    <h3>Line color</h3>
    <input type="color" value="#ADD8E6" id="color">
    <button id="create">- CREATE GRAPH -</button>
    </div>
<div id="chart">
  <canvas id="myChart"></canvas>
</div>
<style>
    #chart {
    display: none;
} 
h1 {
    text-align: center;
}
#creator {
    border: 1px solid white;
    box-sizing: border-box;
    padding: 50px;
    display: flex;
    flex-direction: column;
    align-items: center;
}
hr {
    width: 90%;
}
body {
    background-color: rgb(32, 32, 32);
    color: white;
    font-family: sans-serif;
}
select {
    width: 100px;
    background-color: transparent;
    color: white;
    border: 1px solid white;
    padding: 10px;
    cursor: pointer;
}
option {
    color: black;
}
input {
    width: 50%;
    height: 30px;
    font-size: 15px;
    color: white;
    background-color: transparent;
    border: 1px solid white;
    border-radius: 5px;
}
#creator div {
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin-top: 10px;
}
#creator button {
    margin-top: 30px;
    padding: 10px;
    color: white;
    background-color: transparent;
    border: 1px solid white;
    border-radius: 5px;
    transition: background-color 0.1s linear;
    cursor: pointer;
}
#creator button:hover {
    background-color: white;
    color: black;
}
.label-container {
    display: flex;
    width: 100%;
    flex-direction: column;
    align-items: center;
}
#myChart {
    min-width: 1000px;
    color: white;
}
#remove {
    padding: 5px !important;
    background: transparent !important;
    border: none !important;
    margin-top: 2.5px !important;
    font-size: 20px;
    transition: color 0.15s linear !important;
}
#remove:hover {
    color: red !important;
}
</style>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const createBtn = document.getElementById("create");
const labels = document.getElementById("labels");
const allData = document.getElementById("data-sets");
const addBtn = document.getElementById("addBtn");
const labelArr = Array.from(document.getElementsByClassName("label"));
let marker = 2;
addBtn.addEventListener("click", () => {
  if(marker < 30) {
  if(document.getElementById("remove")) {
    document.getElementById("remove").remove();
  }
    marker++;
    labels.innerHTML += `
    <div class="${marker}">Label ${marker}: <input class="label" value="label ${marker}" type="text"><button id="remove">X</button></div>
    `;
    allData.innerHTML += `
    <div class="${marker}">Label ${marker} data:<input value="0" class="data" type="number"></div>
    `;
  } else {
    addBtn.textContent = "(Max Labels)";
  }
});
setInterval(() => {
  document.getElementById("remove").onclick = event => {
    if(marker >= 3) {
    marker--;
    event.target.parentElement.parentElement.children[document.getElementsByClassName("label").length-2].innerHTML += `
    <button id="remove">X</button>
    `;
    Array.from(document.getElementsByClassName(`${marker+1}`)).forEach(mark => {
      mark.remove();
    })
    }
}
}, 10)
createBtn.addEventListener("click", event => {
let arr = [];
Array.from(document.getElementsByClassName("label")).forEach(input => {
    arr.push(String(input.value));
});
let dat = [];
Array.from(document.getElementsByClassName("data")).forEach(data => {
    dat.push(Number(data.value));
});
const ctx = document.getElementById('myChart');
ctx.parentElement.style.display = "block";
 new Chart(ctx, {
    type: String(document.getElementById("type").value),
    data: {
      labels: arr,
      datasets: [{
        label: String(document.getElementById("title").value),
        data: dat,
        borderWidth: 4,
        tension: Number(document.getElementById("tension").value),
        borderColor: String(document.getElementById("color").value)
      }]
    },
    options: {
      scales: {
        x: {
          ticks: {
            color: 'white'
          },
          grid: {
             color: 'gray' 
          }
        },
        y: {
          ticks: {
            color: 'white'
          },
          grid: {
             color: 'gray' 
          },
          beginAtZero: true
        }
      }
    }
  });
event.target.parentElement.remove();
});
</script>
</body>
</html>